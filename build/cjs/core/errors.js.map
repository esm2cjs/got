{
  "version": 3,
  "sources": ["../../esm/core/errors.js"],
  "sourcesContent": ["import is from '@esm2cjs/is';\n// A hacky check to prevent circular references.\nfunction isRequest(x) {\n    return is.object(x) && '_onResponse' in x;\n}\n/**\nAn error to be thrown when a request fails.\nContains a `code` property with error class code, like `ECONNREFUSED`.\n*/\nexport class RequestError extends Error {\n    constructor(message, error, self) {\n        super(message);\n        Object.defineProperty(this, \"input\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"code\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stack\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"response\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"request\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Error.captureStackTrace(this, this.constructor);\n        this.name = 'RequestError';\n        this.code = error.code ?? 'ERR_GOT_REQUEST_ERROR';\n        this.input = error.input;\n        if (isRequest(self)) {\n            Object.defineProperty(this, 'request', {\n                enumerable: false,\n                value: self,\n            });\n            Object.defineProperty(this, 'response', {\n                enumerable: false,\n                value: self.response,\n            });\n            this.options = self.options;\n        }\n        else {\n            this.options = self;\n        }\n        this.timings = this.request?.timings;\n        // Recover the original stacktrace\n        if (is.string(error.stack) && is.string(this.stack)) {\n            const indexOfMessage = this.stack.indexOf(this.message) + this.message.length;\n            const thisStackTrace = this.stack.slice(indexOfMessage).split('\\n').reverse();\n            const errorStackTrace = error.stack.slice(error.stack.indexOf(error.message) + error.message.length).split('\\n').reverse();\n            // Remove duplicated traces\n            while (errorStackTrace.length > 0 && errorStackTrace[0] === thisStackTrace[0]) {\n                thisStackTrace.shift();\n            }\n            this.stack = `${this.stack.slice(0, indexOfMessage)}${thisStackTrace.reverse().join('\\n')}${errorStackTrace.reverse().join('\\n')}`;\n        }\n    }\n}\n/**\nAn error to be thrown when the server redirects you more than ten times.\nIncludes a `response` property.\n*/\nexport class MaxRedirectsError extends RequestError {\n    constructor(request) {\n        super(`Redirected ${request.options.maxRedirects} times. Aborting.`, {}, request);\n        this.name = 'MaxRedirectsError';\n        this.code = 'ERR_TOO_MANY_REDIRECTS';\n    }\n}\n/**\nAn error to be thrown when the server response code is not 2xx nor 3xx if `options.followRedirect` is `true`, but always except for 304.\nIncludes a `response` property.\n*/\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport class HTTPError extends RequestError {\n    constructor(response) {\n        super(`Response code ${response.statusCode} (${response.statusMessage})`, {}, response.request);\n        this.name = 'HTTPError';\n        this.code = 'ERR_NON_2XX_3XX_RESPONSE';\n    }\n}\n/**\nAn error to be thrown when a cache method fails.\nFor example, if the database goes down or there's a filesystem error.\n*/\nexport class CacheError extends RequestError {\n    constructor(error, request) {\n        super(error.message, error, request);\n        this.name = 'CacheError';\n        this.code = this.code === 'ERR_GOT_REQUEST_ERROR' ? 'ERR_CACHE_ACCESS' : this.code;\n    }\n}\n/**\nAn error to be thrown when the request body is a stream and an error occurs while reading from that stream.\n*/\nexport class UploadError extends RequestError {\n    constructor(error, request) {\n        super(error.message, error, request);\n        this.name = 'UploadError';\n        this.code = this.code === 'ERR_GOT_REQUEST_ERROR' ? 'ERR_UPLOAD' : this.code;\n    }\n}\n/**\nAn error to be thrown when the request is aborted due to a timeout.\nIncludes an `event` and `timings` property.\n*/\nexport class TimeoutError extends RequestError {\n    constructor(error, timings, request) {\n        super(error.message, error, request);\n        Object.defineProperty(this, \"timings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"event\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = 'TimeoutError';\n        this.event = error.event;\n        this.timings = timings;\n    }\n}\n/**\nAn error to be thrown when reading from response stream fails.\n*/\nexport class ReadError extends RequestError {\n    constructor(error, request) {\n        super(error.message, error, request);\n        this.name = 'ReadError';\n        this.code = this.code === 'ERR_GOT_REQUEST_ERROR' ? 'ERR_READING_RESPONSE_STREAM' : this.code;\n    }\n}\n/**\nAn error which always triggers a new retry when thrown.\n*/\nexport class RetryError extends RequestError {\n    constructor(request) {\n        super('Retrying', {}, request);\n        this.name = 'RetryError';\n        this.code = 'ERR_RETRYING';\n    }\n}\n/**\nAn error to be thrown when the request is aborted by AbortController.\n*/\nexport class AbortError extends RequestError {\n    constructor(request) {\n        super('This operation was aborted.', {}, request);\n        this.code = 'ERR_ABORTED';\n        this.name = 'AbortError';\n    }\n}\n"],
  "mappings": "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",
  "names": ["is"]
}
